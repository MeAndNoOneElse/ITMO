# Лабораторная работа №1 - FastCGI сервер для проверки попадания точки в область

## Описание
Веб-приложение для проверки попадания точки с координатами (X, Y) в заданную область на координатной плоскости. Приложение использует FastCGI для обработки запросов на стороне сервера.

## Область проверки
- **Прямоугольник** во второй четверти: X ∈ [-R, 0], Y ∈ [0, R/2]
- **Треугольник** в четвертой четверти: прямоугольный треугольник с вершинами (0,0), (R,0), (0,-R)
- **Сектор круга** в третьей четверти: четверть круга радиуса R

## Требования
- Java 8 или выше
- Apache HTTP Server 2.4 или выше с модулями:
  - mod_proxy
  - mod_proxy_fcgi
- FastCGI Library для Java (fastcgi-lib.jar)

## Установка на Helios

### 1. Загрузка FastCGI библиотеки
```bash
cd lab_1/lib
wget https://repo1.maven.org/maven2/com/fastcgi/fastcgi-lib/2.1/fastcgi-lib-2.1.jar -O fastcgi-lib.jar
```

### 2. Настройка Apache

Отредактируйте файл `httpd.conf` и замените следующие значения:
- `<PORT>` - ваш порт (8080 + номер студента)
- `<USERNAME>` - ваше имя пользователя на Helios
- `<PATH_TO_LAB>` - полный путь к директории lab_1

Пример:
```apache
Listen 8123
User s123456
Group s123456
DocumentRoot "/home/s123456/web/lab_1"
```

### 3. Запуск FastCGI сервера

```bash
cd lab_1
./run.sh
```

Скрипт выполнит:
- Компиляцию Java файлов
- Запуск FastCGI сервера на Unix сокете
- Вывод логов в консоль

### 4. Запуск Apache

В отдельном терминале:
```bash
httpd -f /home/<USERNAME>/web/lab_1/httpd.conf -k start
```

### 5. Проверка работы

Откройте в браузере:
```
http://helios.cs.ifmo.ru:<PORT>/
```

## Структура проекта

```
lab_1/
├── src/
│   └── RequestHandler.java    # FastCGI обработчик запросов
├── lib/
│   └── fastcgi-lib.jar        # FastCGI библиотека
├── build/                     # Скомпилированные классы (создается автоматически)
├── logs/                      # Логи Apache (создается автоматически)
├── index.html                 # Главная страница приложения
├── script.js                  # Клиентская логика и валидация
├── httpd.conf                 # Конфигурация Apache
├── run.sh                     # Скрипт компиляции и запуска
└── README.md                  # Этот файл
```

## Параметры приложения

### Входные данные:
- **X** - координата X (выбор из: -4, -3, -2, -1, 0, 1, 2, 3, 4)
- **Y** - координата Y (число в диапазоне (-3, 5), границы не включаются)
- **R** - радиус области (выбор из: 1, 2, 3, 4, 5)

### Валидация:
- X должен быть выбран из предложенных значений
- Y должен быть числом в диапазоне (-3, 5), исключая границы
- R должен быть выбран из предложенных значений

## Особенности реализации

### RequestHandler.java
- Корректное чтение POST данных с использованием `CONTENT_LENGTH` из переменных окружения FastCGI
- Формирование валидного JSON ответа без лишних символов новой строки
- Валидация параметров на стороне сервера
- Обработка ошибок с отправкой соответствующих сообщений

### script.js
- Валидация Y на клиенте с корректными граничными условиями (< -3 или > 5)
- Отправка асинхронных запросов к серверу
- Отображение результатов в таблице
- Визуализация точек на canvas

## Остановка сервера

### Остановка FastCGI сервера:
Нажмите `Ctrl+C` в терминале, где запущен `run.sh`

### Остановка Apache:
```bash
httpd -f /home/<USERNAME>/web/lab_1/httpd.conf -k stop
```

## Отладка

Логи сервера сохраняются в:
- `logs/error.log` - ошибки Apache
- `logs/access.log` - журнал доступа

Для отладки FastCGI сервера можно добавить вывод в `System.err`, который будет отображаться в консоли.

## Автор
Студент группы [ваша группа], ИТМО

## Лицензия
Учебный проект
