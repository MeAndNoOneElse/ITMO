# Apache HTTP Server Configuration for Lab 1
# FastCGI Area Check Application
# 
# Replace <PORT> with your assigned port (e.g., 8080 + student number)
# Replace <USERNAME> with your Helios username
# Replace <PATH_TO_LAB> with the full path to your lab_1 directory

Listen <PORT>

ServerRoot "/usr"
ServerName helios.cs.ifmo.ru:<PORT>

# Load necessary modules
LoadModule mpm_prefork_module /usr/lib/apache2/modules/mod_mpm_prefork.so
LoadModule authz_core_module /usr/lib/apache2/modules/mod_authz_core.so
LoadModule dir_module /usr/lib/apache2/modules/mod_dir.so
LoadModule mime_module /usr/lib/apache2/modules/mod_mime.so
LoadModule proxy_module /usr/lib/apache2/modules/mod_proxy.so
LoadModule proxy_fcgi_module /usr/lib/apache2/modules/mod_proxy_fcgi.so
LoadModule unixd_module /usr/lib/apache2/modules/mod_unixd.so
LoadModule log_config_module /usr/lib/apache2/modules/mod_log_config.so

# User and Group
User <USERNAME>
Group <USERNAME>

# Document Root
DocumentRoot "<PATH_TO_LAB>/lab_1"

<Directory "<PATH_TO_LAB>/lab_1">
    Options Indexes FollowSymLinks
    AllowOverride None
    Require all granted
    DirectoryIndex index.html
</Directory>

# FastCGI Configuration
<LocationMatch "^/cgi-bin/area\.fcgi$">
    ProxyPass unix:<PATH_TO_LAB>/lab_1/fcgi.sock|fcgi://localhost/
    SetHandler proxy:fcgi://localhost
</LocationMatch>

# Logging
ErrorLog "<PATH_TO_LAB>/lab_1/logs/error.log"
LogLevel warn

LogFormat "%h %l %u %t \"%r\" %>s %b" common
CustomLog "<PATH_TO_LAB>/lab_1/logs/access.log" common

# MIME Types
TypesConfig /etc/mime.types
AddType application/x-httpd-php .php
AddType text/html .html .htm
AddType text/css .css
AddType application/javascript .js

# Default charset
AddDefaultCharset UTF-8

# Timeout settings
Timeout 60
KeepAlive On
MaxKeepAliveRequests 100
KeepAliveTimeout 5
